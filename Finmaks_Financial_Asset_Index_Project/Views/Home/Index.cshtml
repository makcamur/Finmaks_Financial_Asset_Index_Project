@{
    ViewData["Title"] = "Finmaks Financial Index Asset";
}
<style>
    /* Form Container */
    #start {
        max-width: 600px; /* İstediğiniz genişliği ayarlayabilirsiniz */
        margin: 0 auto; /* Ortalama formu sayfanın ortasına */
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    /* Form Group */
    .form-group {
        margin-bottom: 20px;
    }

    /* Label Styles */
    label {
        font-weight: bold;
    }

    /* Input Styles */
    .form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    /* File Input Styles */
    .form-control-file {
        width: 100%;
    }

    /* Button Styles */
    .btn-primary {
        background-color: #007bff;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    /* Table Styles for afterProcess */
    #afterProcess table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    #afterProcess table, #afterProcess th, #afterProcess td {
        border: 1px solid #ccc;
        padding: 10px;
    }

    #afterProcess th {
        background-color: #f2f2f2;
        text-align: left;
    }</style>
<div id="start">
    <form method="post" enctype="multipart/form-data" action="/YourController/ProcessForm">
        </br>
        <div class="form-group">
            <label for="file1">Upload Asset Excel File :</label>
            <input type="file" class="form-control-file" id="fileAsset" name="file1">
        </div>
        </br>
        <div class="form-group">
            <label for="file2">Upload Index Excel File :</label>
            <input type="file" class="form-control-file" id="fileIndex" name="file2">
        </div>
        <div class="form-group">
            <label for="startDate">Start Date:</label>
            <input type="date" class="form-control" id="startDate" name="startDate">
        </div>
        <div class="form-group">
            <label for="endDate">End Date:</label>
            <input type="date" class="form-control" id="endDate" name="endDate">
        </div>
        <button type="button" onclick="ProcessData()" class="btn btn-primary">Lets Go</button>
    </form>
</div>
<div id="afterProcess" ></div>

<script>
    function ProcessData() {
        // Form verilerini topla
        var formData = new FormData();
        var fileAsset = document.getElementById('fileAsset').files[0];
        var fileIndex = document.getElementById('fileIndex').files[0];
        var startDate = document.getElementById('startDate').value;
        var endDate = document.getElementById('endDate').value;

        formData.append('fileAsset', fileAsset);
        formData.append('fileIndex', fileIndex);
        formData.append('startDate', startDate);
        formData.append('endDate', endDate);
        console.log(formData);
        // API adresini belirle
        const baseUrl = "https://localhost:7012/api/";
        const apiUrl = baseUrl + "Exchange/ProcessForm";
        $.ajax({
            url: apiUrl,
            type: 'POST',
            data: formData,
            contentType: false,
            processData: false,
            success: function (data) {
                var redirectToUrl = '@Url.Action("GetPartial", "Home")'; // ActionName ve ControllerName'i kendi projenize göre ayarlayın
                // Elde edilen veriyi JSON formatına çevirip URL'ye query parametresi olarak ekleyin
                var jsonData = JSON.stringify(data);
                redirectToUrl += '?jsonData=' + encodeURIComponent(jsonData);
                // Yönlendirmeyi gerçekleştirin ve sonucu #afterProcess id'li div'e yerleştirin
                $.ajax({
                    url: redirectToUrl,
                    type: 'GET',
                    success: function (partialViewResult) {
                        // Kısmi görünümü #afterProcess id'li div'e yerleştirin
                        $('#afterProcess').html(partialViewResult);
                    },
                    error: function (error) {
                        console.log(error);
                    }
                });

            },
            error: function (error) {
                console.log(error);
            }
        });

    }
  
</script>
